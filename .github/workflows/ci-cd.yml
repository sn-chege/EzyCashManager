name: CI/CD Pipeline

on:
  push:
    branches:
      - master  

jobs:
  build-and-push:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Build and push Docker images
      run: |
        
        echo "$DOCKER_PASSWORD" | docker login

        docker-compose build 254chege/ezy-accountservice ./AccountService
        docker-compose push 254chege/ezy-accountservice

        docker-compose build 254chege/ezy-atmservice ./ATMService
        docker-compose push 254chege/ezy-atmservice

        docker-compose build 254chege/ezy-apigateway ./APIGateway
        docker-compose push 254chege/ezy-apigateway

        docker-compose build 254chege/ezy-authservice ./AuthService
        docker-compose push 254chege/ezy-authservice

        docker-compose build 254chege/ezy-frontend ./Frontend
        docker-compose push 254chege/ezy-frontend

    # docker-compose build
    # docker-compose push
    
